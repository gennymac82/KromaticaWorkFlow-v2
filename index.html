<!doctype html> 
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<script>
  if (!location.hash) location.replace(location.href + "#home");
</script>
<title>Kromatica Cash Flow</title>
<link rel="manifest" href="manifest.json" />
<meta name="theme-color" content="#0f172a" />
<style>
body{background:#0b1220;color:#fff;font-family:Arial;margin:0;padding:20px}
.hidden{display:none}
.card{background:#0f172a;padding:20px;border-radius:12px;margin-top:10px}
.btn{padding:10px 14px;border-radius:10px;border:1px solid #1f2a44;background:#0f172a;color:#fff;cursor:pointer}
.btn.primary{background:#22c55e;color:#000;border:0}
.nav{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:15px}
.table{width:100%;border-collapse:collapse}
.table th,.table td{border-bottom:1px solid #1f2a44;padding:8px;text-align:left}
</style>
</head>
<body>

<h1>ðŸ“’ Kromatica Cash Flow</h1>

<div class="nav">
<button class="btn" data-route="home">Home</button>
<button class="btn" data-route="riepilogo">Riepilogo movimenti</button>
<button class="btn" data-route="saldo">Saldo mensile</button>
<button class="btn primary" id="installBtn">Installa</button>
</div>

<section id="page-home" class="card">
<h2>Nuovo movimento</h2>
<form id="cashForm">
<label>Data</label><input type="date" id="date" required>
<label>Descrizione</label><input type="text" id="description" required>
<label>Categoria</label>
<select id="category">
<option>Collaboratori</option><option>Famiglia</option>
<option>Motori</option><option>Fototessera</option><option>Tasse</option>
</select>
<label>Entrata (â‚¬)</label><input type="number" id="income" step="0.01">
<label>Uscita (â‚¬)</label><input type="number" id="expense" step="0.01">
<br><br>
<button class="btn primary" type="submit">ðŸ’¾ Salva</button>
<div id="status"></div>
</form>
</section>

<section id="page-riepilogo" class="card hidden">
<h2>Riepilogo</h2>
<label>Mese</label><input type="month" id="repMonth">
<label>Categoria</label>
<select id="repCategory">
<option value="">Tutte</option>
<option>Collaboratori</option><option>Famiglia</option>
<option>Motori</option><option>Fototessera</option><option>Tasse</option>
</select>
<br><br>
<button class="btn" id="btnLoadList">Carica</button>
<div id="repContainer"></div>
</section>

<section id="page-saldo" class="card hidden">
<h2>Saldo mensile</h2>
<label>Mese</label><input type="month" id="sumMonth">
<br><br>
<button class="btn" id="btnLoadSummary">Calcola saldo</button>
<div id="sumContainer"></div>
</section>

<script src="app.js"></script>
<script>
let deferredPrompt=null;
window.addEventListener('beforeinstallprompt',e=>{e.preventDefault();deferredPrompt=e;});
document.getElementById('installBtn').onclick=()=>{if(deferredPrompt){deferredPrompt.prompt();deferredPrompt=null;}};
if('serviceWorker' in navigator) navigator.serviceWorker.register('sw.js');
</script>

</body>
</html>
